<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>StreamX Live</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>

<style>
body{
  margin:0;
  font-family:Arial;
  background:#020617;
  color:white;
  text-align:center;
}
header{
  padding:15px;
  background:black;
}
video{
  width:95%;
  max-width:600px;
  background:black;
  border-radius:10px;
}
input,button{
  width:90%;
  max-width:400px;
  padding:12px;
  margin:8px;
  border-radius:8px;
  border:none;
}
button{
  background:#22c55e;
  font-weight:bold;
}
</style>
</head>

<body>

<header>
  <h2>ðŸ“¡ StreamX Live</h2>
</header>

<button onclick="startStream()">ðŸŽ¥ Start Live</button><br>
<input id="myId" placeholder="Your Stream ID" readonly>

<hr>

<input id="streamId" placeholder="Enter Stream ID">
<button onclick="watchStream()">â–¶ Watch Live</button>

<br><br>
<video id="video" autoplay playsinline controls></video>

<script>
const peer = new Peer(undefined,{
  host:'peerjs.com',
  secure:true,
  port:443
});

peer.on('open', id=>{
  document.getElementById('myId').value = id;
});

function startStream(){
  navigator.mediaDevices.getUserMedia({video:true,audio:true})
  .then(stream=>{
    document.getElementById('video').srcObject = stream;

    peer.on('call', call=>{
      call.answer(stream);
    });
  })
  .catch(err=>{
    alert("Allow camera & microphone");
  });
}

function watchStream(){
  const id = document.getElementById('streamId').value;
  const call = peer.call(id, null);

  call.on('stream', stream=>{
    document.getElementById('video').srcObject = stream;
  });
}
</script>

</body>
</html>
