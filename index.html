<!DOCTYPE html>
<html>
<head>
  <title>Free Video Call</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
  <style>
    body { background:#111; color:#fff; text-align:center; font-family:Arial; }
    video { width:45%; margin:5px; border-radius:10px; background:black; }
    input, button { padding:10px; margin:5px; }
  </style>
</head>
<body>

<h2>ðŸŽ¥ Video & Audio Call (WORKS)</h2>

<p>Your ID: <b id="myId">loading...</b></p>

<input id="callId" placeholder="Enter ID to call">
<button onclick="callUser()">Call</button>

<br><br>
<video id="local" autoplay muted></video>
<video id="remote" autoplay></video>

<script>
const peer = new Peer(undefined, {
  host: "peerjs.com",
  secure: true,
  port: 443
});

let localStream;

peer.on("open", id => myId.innerText = id);

navigator.mediaDevices.getUserMedia({ video:true, audio:true })
.then(stream => {
  localStream = stream;
  local.srcObject = stream;
});

peer.on("call", call => {
  call.answer(localStream);
  call.on("stream", s => remote.srcObject = s);
});

function callUser() {
  const id = callId.value;
  const call = peer.call(id, localStream);
  call.on("stream", s => remote.srcObject = s);
}
</script>

</body>
</html>
